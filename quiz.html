<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minimal Quiz Test</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  #questionText { font-size: 1.2rem; margin-bottom: 15px; }
  button.option-btn { display: block; margin-bottom: 10px; padding: 10px; width: 100%; font-size: 1rem; }
  #navButtons { margin-top: 20px; }
</style>
</head>
<body>

<h1>Minimal Quiz Test</h1>
<div id="questionText">Loading...</div>
<div id="options"></div>
<div id="navButtons">
  <button id="prevBtn">Previous</button>
  <button id="nextBtn">Next</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDr3_9dpo55esyfpkwsAjfFi_1KMu0ZDrU",
    authDomain: "neet-88499.firebaseapp.com",
    projectId: "neet-88499",
    storageBucket: "neet-88499.firebasestorage.app",
    messagingSenderId: "889163298965",
    appId: "1:889163298965:web:fbae28b0ba478cff2f839c",
    measurementId: "G-GEG090K2JQ"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const questionTextElem = document.getElementById('questionText');
  const optionsContainer = document.getElementById('options');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');

  let questions = [];
  let currentIndex = 0;

  async function loadAllQuestions() {
    const qSnapshot = await getDocs(collection(db, 'questions'));
    if (qSnapshot.empty) {
      alert("No questions found in 'questions' collection.");
      questionTextElem.textContent = "No questions found.";
      return;
    }
    questions = [];
    console.log("All questions in Firestore:");
    qSnapshot.forEach(docSnap => {
      const data = docSnap.data();
      console.log(`ID: ${docSnap.id} | Subject: ${data.subject} | Question: ${data.question}`);
      questions.push({
        id: docSnap.id,
        question: data.question,
        options: data.options,
        correctOption: data.correctOption
      });
    });
    showQuestion();
  }

  function showQuestion() {
    if (questions.length === 0) return;
    const q = questions[currentIndex];
    questionTextElem.textContent = `Q${currentIndex + 1}: ${q.question}`;
    optionsContainer.innerHTML = '';
    q.options.forEach((opt, idx) => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = opt;
      optionsContainer.appendChild(btn);
    });
    updateNavButtons();
  }

  function updateNavButtons() {
    prevBtn.disabled = currentIndex === 0;
    nextBtn.disabled = currentIndex === questions.length - 1;
  }

  prevBtn.addEventListener('click', () => {
    if (currentIndex > 0) {
      currentIndex--;
      showQuestion();
    }
  });

  nextBtn.addEventListener('click', () => {
    if (currentIndex < questions.length - 1) {
      currentIndex++;
      showQuestion();
    }
  });

  loadAllQuestions();

</script>
</body>
</html>
