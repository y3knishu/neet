<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NEET PG Quiz - Subjects</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #f9f9f9;
  }
  h1 {
    text-align: center;
    color: #344ea3;
  }
  .year-group {
    margin-bottom: 40px;
  }
  .year-title {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #222;
    border-bottom: 2px solid #344ea3;
    padding-bottom: 5px;
  }
  #subjectCardsContainer {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }
  .subject-card {
    flex: 1 1 180px;
    max-width: 180px;
    padding: 15px;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    box-shadow: 0 3px 8px rgb(0 0 0 / 0.2);
    user-select: none;
    transition: transform 0.2s ease;
    background: linear-gradient(135deg, red, orange, yellow, green, blue, indigo, violet);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .subject-card.locked {
    filter: grayscale(80%);
    cursor: not-allowed;
    opacity: 0.6;
  }
  .subject-card:hover:not(.locked) {
    transform: scale(1.05);
    box-shadow: 0 6px 15px rgb(0 0 0 / 0.4);
  }
  .subject-name {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 6px;
    text-align: center;
  }
  .subject-year {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 10px;
  }
  .label {
    padding: 4px 8px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 0.85rem;
  }
  .label.free {
    background-color: #27ae60;
  }
  .label.locked {
    background-color: #7f8c8d;
  }
  /* WhatsApp floating button */
  #whatsappHelp {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background-color: #25d366;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    box-shadow: 0 4px 10px rgb(0 0 0 / 0.3);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    z-index: 999;
  }
  #whatsappHelp img {
    width: 35px;
    height: 35px;
  }
</style>
</head>
<body>

<h1>NEET PG Quiz Subjects</h1>

<div id="yearGroupsContainer"></div>

<!-- WhatsApp Help Floating Button -->
<a id="whatsappHelp" href="https://wa.me/919431328569" target="_blank" title="Get Help on WhatsApp">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
</a>

<script>
  // Your subjects data grouped by year
  const subjectsByYear = {
    "1st Year": [
      { name: "Anatomy", free: true },
      { name: "Physiology", free: false },
      { name: "Biochemistry", free: false }
    ],
    "2nd Year": [
      { name: "Pathology", free: false },
      { name: "Pharmacology", free: false },
      { name: "Microbiology", free: false },
      { name: "Forensic Medicine", free: false }
    ],
    "3rd Year": [
      { name: "Community Medicine", free: false },
      { name: "ENT", free: false },
      { name: "Ophthalmology", free: false }
    ],
    "Final Year": [
      { name: "General Medicine", free: false },
      { name: "General Surgery", free: false },
      { name: "Obstetrics & Gynaecology", free: false },
      { name: "Pediatrics", free: false },
      { name: "Orthopaedics", free: false },
      { name: "Dermatology", free: false },
      { name: "Psychiatry", free: false },
      { name: "Respiratory Medicine", free: false },
      { name: "Anesthesiology", free: false }
    ]
  };

  const yearGroupsContainer = document.getElementById('yearGroupsContainer');

  // Simulate user login & payment info (replace with real Firebase auth and payment check later)
  const userLoggedIn = false;  // Change to true to simulate logged in user
  const userHasPaid = false;   // Change to true to simulate paid user

  function createSubjectCard(subject) {
    const card = document.createElement('div');
    card.classList.add('subject-card');

    // Lock logic: Anatomy free for all, others locked if not paid or not logged in
    const isLocked = !(subject.free || (userLoggedIn && userHasPaid));
    if (isLocked) card.classList.add('locked');

    card.innerHTML = `
      <div class="subject-name">${subject.name}</div>
      <div class="label ${subject.free ? 'free' : 'locked'}">${subject.free ? 'Free' : 'Locked'}</div>
    `;

    if (!isLocked) {
      card.addEventListener('click', () => {
        // Redirect to quiz page with subject parameter
        window.location.href = `quiz.html?subject=${encodeURIComponent(subject.name.toLowerCase())}`;
      });
    } else {
      card.title = 'Unlock by signing in and paying â‚¹99 (except Anatomy)';
    }
    return card;
  }

  function renderYearGroup(year, subjects) {
    const groupDiv = document.createElement('div');
    groupDiv.classList.add('year-group');

    const title = document.createElement('h2');
    title.classList.add('year-title');
    title.textContent = year;
    groupDiv.appendChild(title);

    const cardsContainer = document.createElement('div');
    cardsContainer.id = 'subjectCardsContainer';

    subjects.forEach(subj => {
      const card = createSubjectCard(subj);
      cardsContainer.appendChild(card);
    });

    groupDiv.appendChild(cardsContainer);
    yearGroupsContainer.appendChild(groupDiv);
  }

  // Render all years and subjects
  for (const [year, subjects] of Object.entries(subjectsByYear)) {
    renderYearGroup(year, subjects);
  }
</script>

</body>
</html>
